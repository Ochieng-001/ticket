<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlockTicket - Decentralized Event Ticketing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366F1',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i class="fas fa-ticket-alt text-primary text-2xl mr-3"></i>
                        <h1 class="text-xl font-bold text-gray-900">BlockTicket</h1>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Wallet Connection Status -->
                    <div id="walletStatus" class="hidden bg-secondary/10 text-secondary px-3 py-1 rounded-full text-sm font-medium">
                        <i class="fas fa-wallet mr-2"></i>
                        <span id="walletAddress">0x1234...5678</span>
                    </div>
                    
                    <!-- Connect Wallet Button -->
                    <button id="connectWallet" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                        <i class="fas fa-wallet mr-2"></i>
                        Connect Wallet
                    </button>
                    
                    <!-- Admin Toggle -->
                    <button id="adminToggle" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors">
                        <i class="fas fa-user-shield mr-2"></i>
                        Admin View
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Admin Header -->
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-900">Admin Dashboard</h2>
                <p class="text-gray-600 mt-2">Create and manage events on the blockchain</p>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <div class="flex items-center">
                        <div class="p-2 bg-primary/10 rounded-lg">
                            <i class="fas fa-calendar text-primary"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Total Events</p>
                            <p class="text-2xl font-bold text-gray-900" data-bind="eventCounter">12</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <div class="flex items-center">
                        <div class="p-2 bg-secondary/10 rounded-lg">
                            <i class="fas fa-ticket-alt text-secondary"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Tickets Sold</p>
                            <p class="text-2xl font-bold text-gray-900" data-bind="ticketCounter">247</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <div class="flex items-center">
                        <div class="p-2 bg-accent/10 rounded-lg">
                            <i class="fas fa-coins text-accent"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Revenue (ETH)</p>
                            <p class="text-2xl font-bold text-gray-900" data-bind="totalRevenue">15.2</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <div class="flex items-center">
                        <div class="p-2 bg-blue-100 rounded-lg">
                            <i class="fas fa-users text-blue-600"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Active Events</p>
                            <p class="text-2xl font-bold text-gray-900" data-bind="activeEvents">8</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create Event Form -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">Create New Event</h3>
                
                <form id="createEventForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Event Name</label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Enter event name" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Venue</label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Event venue" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Event Date</label>
                        <input type="datetime-local" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" required>
                    </div>
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" rows="3" placeholder="Event description"></textarea>
                    </div>
                    
                    <!-- Ticket Types Configuration -->
                    <div class="md:col-span-2">
                        <h4 class="text-lg font-medium text-gray-900 mb-4">Ticket Configuration</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- Regular Tickets -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h5 class="font-medium text-gray-900 mb-3">Regular Tickets</h5>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Price (KES)</label>
                                        <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="1000">
                                        <p class="text-xs text-gray-500 mt-1">≈ 0.0075 ETH</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Supply</label>
                                        <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="100">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- VIP Tickets -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h5 class="font-medium text-gray-900 mb-3">VIP Tickets</h5>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Price (KES)</label>
                                        <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="2500">
                                        <p class="text-xs text-gray-500 mt-1">≈ 0.0188 ETH</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Supply</label>
                                        <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="50">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- VVIP Tickets -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h5 class="font-medium text-gray-900 mb-3">VVIP Tickets</h5>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Price (KES)</label>
                                        <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="5000">
                                        <p class="text-xs text-gray-500 mt-1">≈ 0.0375 ETH</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Supply</label>
                                        <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="20">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="md:col-span-2">
                        <button type="submit" class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                            <i class="fas fa-plus mr-2"></i>
                            Create Event
                        </button>
                    </div>
                </form>
            </div>

            <!-- Admin Events Management -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">Manage Events</h3>
                
                <div class="space-y-4">
                    <!-- @MAP: events.map(event => ( -->
                    <div class="border border-gray-200 rounded-lg p-4">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-900" data-bind="event.name">Tech Conference 2024</h4>
                                <p class="text-gray-600 text-sm" data-bind="event.venue">Nairobi Convention Centre</p>
                                <p class="text-gray-500 text-sm" data-bind="event.date">March 15, 2024 • 9:00 AM</p>
                                
                                <div class="mt-3 flex space-x-4 text-sm">
                                    <span class="text-gray-600">Regular: <span class="font-medium" data-bind="event.sold[0]">45</span>/<span data-bind="event.supply[0]">100</span></span>
                                    <span class="text-gray-600">VIP: <span class="font-medium" data-bind="event.sold[1]">20</span>/<span data-bind="event.supply[1]">50</span></span>
                                    <span class="text-gray-600">VVIP: <span class="font-medium" data-bind="event.sold[2]">8</span>/<span data-bind="event.supply[2]">20</span></span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <span class="bg-secondary/10 text-secondary px-2 py-1 rounded-full text-xs font-medium">Active</span>
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-ellipsis-v"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- @END_MAP )) -->
                    
                    <!-- Additional event entries would repeat here -->
                    <div class="border border-gray-200 rounded-lg p-4">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-900">Music Festival 2024</h4>
                                <p class="text-gray-600 text-sm">Uhuru Gardens</p>
                                <p class="text-gray-500 text-sm">April 20, 2024 • 6:00 PM</p>
                                
                                <div class="mt-3 flex space-x-4 text-sm">
                                    <span class="text-gray-600">Regular: <span class="font-medium">78</span>/<span>200</span></span>
                                    <span class="text-gray-600">VIP: <span class="font-medium">35</span>/<span>100</span></span>
                                    <span class="text-gray-600">VVIP: <span class="font-medium">15</span>/<span>30</span></span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <span class="bg-secondary/10 text-secondary px-2 py-1 rounded-full text-xs font-medium">Active</span>
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-ellipsis-v"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Interface -->
    <div id="userInterface">
        <!-- Hero Section -->
        <div class="bg-gradient-to-r from-primary to-blue-600 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                <div class="text-center">
                    <h1 class="text-4xl md:text-6xl font-bold mb-6">Decentralized Event Ticketing</h1>
                    <p class="text-xl md:text-2xl opacity-90 mb-8 max-w-3xl mx-auto">Secure, transparent, and blockchain-powered ticket purchases with MetaMask integration</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button class="bg-white text-primary px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                            <i class="fas fa-search mr-2"></i>
                            Browse Events
                        </button>
                        <button class="border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-primary transition-colors">
                            <i class="fas fa-question-circle mr-2"></i>
                            How it Works
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Events Grid -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900">Upcoming Events</h2>
                <div class="flex space-x-4">
                    <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        <option>All Categories</option>
                        <option>Conferences</option>
                        <option>Music</option>
                        <option>Sports</option>
                    </select>
                    <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        <option>Sort by Date</option>
                        <option>Sort by Price</option>
                        <option>Sort by Popularity</option>
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- @MAP: events.map(event => ( -->
                <!-- Event Card 1 -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer" onclick="openEventModal(1)">
                    <!-- Modern tech conference image -->
                    <img src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400" alt="Tech Conference 2024" class="w-full h-48 object-cover">
                    
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-xl font-semibold text-gray-900" data-bind="event.name">Tech Conference 2024</h3>
                            <span class="bg-secondary/10 text-secondary px-2 py-1 rounded-full text-xs font-medium">Available</span>
                        </div>
                        
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-calendar mr-2"></i>
                                <span data-bind="event.date">March 15, 2024 • 9:00 AM</span>
                            </div>
                            <div class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                <span data-bind="event.venue">Nairobi Convention Centre</span>
                            </div>
                        </div>
                        
                        <div class="border-t border-gray-200 pt-4">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-sm text-gray-600">Starting from</p>
                                    <p class="text-lg font-bold text-gray-900">KES 1,000</p>
                                    <p class="text-xs text-gray-500">≈ 0.0075 ETH</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-600">Available</p>
                                    <p class="text-lg font-bold text-secondary" data-bind="event.availableTickets">127 tickets</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Event Card 2 -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer" onclick="openEventModal(2)">
                    <!-- Music festival crowd image -->
                    <img src="https://images.unsplash.com/photo-1459749411175-04bf5292ceea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400" alt="Music Festival 2024" class="w-full h-48 object-cover">
                    
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-xl font-semibold text-gray-900">Music Festival 2024</h3>
                            <span class="bg-secondary/10 text-secondary px-2 py-1 rounded-full text-xs font-medium">Available</span>
                        </div>
                        
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-calendar mr-2"></i>
                                <span>April 20, 2024 • 6:00 PM</span>
                            </div>
                            <div class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                <span>Uhuru Gardens</span>
                            </div>
                        </div>
                        
                        <div class="border-t border-gray-200 pt-4">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-sm text-gray-600">Starting from</p>
                                    <p class="text-lg font-bold text-gray-900">KES 1,500</p>
                                    <p class="text-xs text-gray-500">≈ 0.0113 ETH</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-600">Available</p>
                                    <p class="text-lg font-bold text-secondary">202 tickets</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Event Card 3 -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer" onclick="openEventModal(3)">
                    <!-- Business networking event image -->
                    <img src="https://images.unsplash.com/photo-1511578314322-379afb476865?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400" alt="Business Networking Summit" class="w-full h-48 object-cover">
                    
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-xl font-semibold text-gray-900">Business Networking Summit</h3>
                            <span class="bg-accent/10 text-accent px-2 py-1 rounded-full text-xs font-medium">Almost Full</span>
                        </div>
                        
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-calendar mr-2"></i>
                                <span>May 5, 2024 • 2:00 PM</span>
                            </div>
                            <div class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                <span>Serena Hotel</span>
                            </div>
                        </div>
                        
                        <div class="border-t border-gray-200 pt-4">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-sm text-gray-600">Starting from</p>
                                    <p class="text-lg font-bold text-gray-900">KES 3,000</p>
                                    <p class="text-xs text-gray-500">≈ 0.0225 ETH</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-600">Available</p>
                                    <p class="text-lg font-bold text-accent">15 tickets</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- @END_MAP )) -->
            </div>
        </div>

        <!-- My Tickets Section -->
        <div class="bg-gray-50 py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">My Tickets</h2>
                
                <!-- @STATE: userTickets:array = [] -->
                <div id="userTicketsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- @MAP: userTickets.map(ticket => ( -->
                    <!-- Ticket Card -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                        <div class="bg-gradient-to-r from-primary to-blue-600 text-white p-4">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-semibold" data-bind="ticket.eventName">Tech Conference 2024</h3>
                                    <p class="text-sm opacity-80" data-bind="ticket.ticketType">VIP Ticket</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm opacity-80">Ticket #</p>
                                    <p class="font-mono font-semibold" data-bind="ticket.id">001247</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4">
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">Date</span>
                                    <span class="font-medium" data-bind="ticket.eventDate">March 15, 2024</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">Venue</span>
                                    <span class="font-medium" data-bind="ticket.venue">Nairobi Convention Centre</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">Seat</span>
                                    <span class="font-medium" data-bind="ticket.seat">A-15</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">Price Paid</span>
                                    <span class="font-medium" data-bind="ticket.price">KES 2,500</span>
                                </div>
                            </div>
                            
                            <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                                <span class="bg-secondary/10 text-secondary px-2 py-1 rounded-full text-xs font-medium" data-bind="ticket.status">Valid</span>
                                <button class="text-primary hover:text-primary/80 text-sm font-medium">
                                    <i class="fas fa-qrcode mr-1"></i>
                                    Show QR
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- @END_MAP )) -->
                    
                    <!-- Empty State -->
                    <div id="emptyTicketsState" class="hidden col-span-full text-center py-12">
                        <i class="fas fa-ticket-alt text-gray-300 text-6xl mb-4"></i>
                        <h3 class="text-xl font-medium text-gray-500 mb-2">No tickets yet</h3>
                        <p class="text-gray-400 mb-6">Purchase your first blockchain ticket to get started</p>
                        <button class="bg-primary text-white px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors">
                            Browse Events
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Detail Modal -->
    <div id="eventModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="relative">
                <!-- Event cover image -->
                <img id="modalEventImage" src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=400" alt="Event" class="w-full h-64 object-cover">
                
                <button onclick="closeEventModal()" class="absolute top-4 right-4 bg-white bg-opacity-90 text-gray-700 p-2 rounded-full hover:bg-opacity-100 transition-all">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="p-6">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Event Details -->
                    <div class="lg:col-span-2">
                        <h2 id="modalEventTitle" class="text-3xl font-bold text-gray-900 mb-4" data-bind="selectedEvent.name">Tech Conference 2024</h2>
                        
                        <div class="flex flex-wrap gap-4 mb-6">
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-calendar mr-2"></i>
                                <span id="modalEventDate" data-bind="selectedEvent.date">March 15, 2024 • 9:00 AM</span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                <span id="modalEventVenue" data-bind="selectedEvent.venue">Nairobi Convention Centre</span>
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i class="fas fa-users mr-2"></i>
                                <span id="modalEventCapacity" data-bind="selectedEvent.capacity">170 attendees</span>
                            </div>
                        </div>
                        
                        <div class="prose max-w-none mb-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">About this event</h3>
                            <p id="modalEventDescription" class="text-gray-700 leading-relaxed" data-bind="selectedEvent.description">
                                Join us for the most comprehensive tech conference in East Africa. This year's theme focuses on blockchain technology, AI innovations, and the future of decentralized applications. Network with industry leaders, attend hands-on workshops, and discover the latest trends in technology.
                            </p>
                        </div>
                        
                        <div class="border-t border-gray-200 pt-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">What's included</h3>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-center"><i class="fas fa-check text-secondary mr-2"></i> Full day access to all sessions</li>
                                <li class="flex items-center"><i class="fas fa-check text-secondary mr-2"></i> Networking lunch and coffee breaks</li>
                                <li class="flex items-center"><i class="fas fa-check text-secondary mr-2"></i> Access to workshop materials</li>
                                <li class="flex items-center"><i class="fas fa-check text-secondary mr-2"></i> Certificate of attendance</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Ticket Purchase -->
                    <div class="lg:col-span-1">
                        <div class="bg-gray-50 rounded-xl p-6 sticky top-4">
                            <h3 class="text-xl font-semibold text-gray-900 mb-4">Select Tickets</h3>
                            
                            <!-- Ticket Types -->
                            <div class="space-y-4 mb-6">
                                <!-- Regular Ticket -->
                                <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors cursor-pointer ticket-option" data-ticket-type="regular">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <h4 class="font-medium text-gray-900">Regular</h4>
                                            <p class="text-sm text-gray-600">General admission</p>
                                        </div>
                                        <div class="text-right">
                                            <p class="font-bold text-gray-900">KES 1,000</p>
                                            <p class="text-xs text-gray-500">≈ 0.0075 ETH</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center text-sm">
                                        <span class="text-gray-600">Available: <span class="font-medium text-secondary">55</span></span>
                                        <div class="flex items-center">
                                            <button class="w-8 h-8 border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-100">-</button>
                                            <span class="mx-3 font-medium">0</span>
                                            <button class="w-8 h-8 border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-100">+</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- VIP Ticket -->
                                <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors cursor-pointer ticket-option" data-ticket-type="vip">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <h4 class="font-medium text-gray-900">VIP</h4>
                                            <p class="text-sm text-gray-600">Premium seating + perks</p>
                                        </div>
                                        <div class="text-right">
                                            <p class="font-bold text-gray-900">KES 2,500</p>
                                            <p class="text-xs text-gray-500">≈ 0.0188 ETH</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center text-sm">
                                        <span class="text-gray-600">Available: <span class="font-medium text-secondary">30</span></span>
                                        <div class="flex items-center">
                                            <button class="w-8 h-8 border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-100">-</button>
                                            <span class="mx-3 font-medium">0</span>
                                            <button class="w-8 h-8 border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-100">+</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- VVIP Ticket -->
                                <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors cursor-pointer ticket-option" data-ticket-type="vvip">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <h4 class="font-medium text-gray-900">VVIP</h4>
                                            <p class="text-sm text-gray-600">Exclusive access + dining</p>
                                        </div>
                                        <div class="text-right">
                                            <p class="font-bold text-gray-900">KES 5,000</p>
                                            <p class="text-xs text-gray-500">≈ 0.0375 ETH</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center text-sm">
                                        <span class="text-gray-600">Available: <span class="font-medium text-secondary">12</span></span>
                                        <div class="flex items-center">
                                            <button class="w-8 h-8 border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-100">-</button>
                                            <span class="mx-3 font-medium">0</span>
                                            <button class="w-8 h-8 border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-100">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Purchase Summary -->
                            <div class="border-t border-gray-200 pt-4 mb-6">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-600">Subtotal</span>
                                    <span class="font-medium">KES 0</span>
                                </div>
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-600">Gas fee (est.)</span>
                                    <span class="font-medium">≈ 0.001 ETH</span>
                                </div>
                                <div class="flex justify-between font-bold text-lg">
                                    <span>Total</span>
                                    <div class="text-right">
                                        <div>KES 0</div>
                                        <div class="text-sm text-gray-500">≈ 0.001 ETH</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Purchase Button -->
                            <button id="purchaseButton" class="w-full bg-primary hover:bg-primary/90 text-white py-3 rounded-lg font-medium transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>
                                <i class="fas fa-shopping-cart mr-2"></i>
                                Purchase with MetaMask
                            </button>
                            
                            <p class="text-xs text-gray-500 mt-3 text-center">
                                Secure blockchain transaction via MetaMask
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Transaction Status Modal -->
    <div id="transactionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full p-6">
            <div class="text-center">
                <div id="transactionStatus">
                    <!-- Loading State -->
                    <div id="transactionLoading" class="hidden">
                        <div class="w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">Processing Transaction</h3>
                        <p class="text-gray-600 mb-4">Please confirm the transaction in MetaMask</p>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="text-sm text-gray-600">
                                <div class="flex justify-between mb-1">
                                    <span>Transaction Hash:</span>
                                    <span class="font-mono text-xs" data-bind="transactionHash">0x1234...5678</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Success State -->
                    <div id="transactionSuccess" class="hidden">
                        <div class="w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-check text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">Purchase Successful!</h3>
                        <p class="text-gray-600 mb-4">Your tickets have been securely stored on the blockchain</p>
                        <button class="bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors">
                            View My Tickets
                        </button>
                    </div>
                    
                    <!-- Error State -->
                    <div id="transactionError" class="hidden">
                        <div class="w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-times text-white text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">Transaction Failed</h3>
                        <p class="text-gray-600 mb-4">The transaction was rejected or failed. Please try again.</p>
                        <button class="bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors">
                            Try Again
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2">
        <!-- Toast notifications will be dynamically inserted here -->
    </div>

    <script>
        // Global state
        let currentView = 'user';
        let isWalletConnected = false;
        let selectedEvent = null;
        let ticketQuantities = { regular: 0, vip: 0, vvip: 0 };

        // TODO: Implement Web3 integration with ethers.js or web3.js
        // TODO: Connect to MetaMask wallet
        // TODO: Smart contract interaction functions
        // TODO: Real-time data fetching from blockchain
        // TODO: Transaction handling and status tracking

        (function() {
            // Initialize the application
            function init() {
                setupEventListeners();
                checkWalletConnection();
                updateView();
            }

            function setupEventListeners() {
                // Navigation
                document.getElementById('adminToggle').addEventListener('click', toggleView);
                document.getElementById('connectWallet').addEventListener('click', connectWallet);
                
                // Form submissions
                document.getElementById('createEventForm').addEventListener('submit', handleEventCreation);
                
                // Modal controls
                window.openEventModal = openEventModal;
                window.closeEventModal = closeEventModal;
                
                // Ticket quantity controls
                setupTicketQuantityControls();
            }

            function toggleView() {
                currentView = currentView === 'user' ? 'admin' : 'user';
                updateView();
                
                const toggleBtn = document.getElementById('adminToggle');
                toggleBtn.innerHTML = currentView === 'admin' 
                    ? '<i class="fas fa-user mr-2"></i>User View'
                    : '<i class="fas fa-user-shield mr-2"></i>Admin View';
            }

            function updateView() {
                const adminDashboard = document.getElementById('adminDashboard');
                const userInterface = document.getElementById('userInterface');
                
                if (currentView === 'admin') {
                    adminDashboard.classList.remove('hidden');
                    userInterface.classList.add('hidden');
                } else {
                    adminDashboard.classList.add('hidden');
                    userInterface.classList.remove('hidden');
                }
            }

            function connectWallet() {
                // TODO: Implement MetaMask connection
                if (typeof window.ethereum !== 'undefined') {
                    // MetaMask is installed
                    showToast('Connecting to MetaMask...', 'info');
                    
                    // Simulate connection
                    setTimeout(() => {
                        isWalletConnected = true;
                        updateWalletStatus();
                        showToast('Wallet connected successfully!', 'success');
                    }, 2000);
                } else {
                    showToast('Please install MetaMask to continue', 'error');
                }
            }

            function checkWalletConnection() {
                // TODO: Check if wallet is already connected
                // This would typically check localStorage or call ethereum.request
            }

            function updateWalletStatus() {
                const connectBtn = document.getElementById('connectWallet');
                const walletStatus = document.getElementById('walletStatus');
                
                if (isWalletConnected) {
                    connectBtn.classList.add('hidden');
                    walletStatus.classList.remove('hidden');
                    // TODO: Update with actual wallet address
                    document.getElementById('walletAddress').textContent = '0x1234...5678';
                } else {
                    connectBtn.classList.remove('hidden');
                    walletStatus.classList.add('hidden');
                }
            }

            function handleEventCreation(e) {
                e.preventDefault();
                
                if (!isWalletConnected) {
                    showToast('Please connect your wallet first', 'error');
                    return;
                }
                
                // TODO: Implement smart contract interaction for event creation
                showToast('Creating event on blockchain...', 'info');
                
                // Simulate blockchain transaction
                setTimeout(() => {
                    showToast('Event created successfully!', 'success');
                    e.target.reset();
                }, 3000);
            }

            function openEventModal(eventId) {
                selectedEvent = eventId;
                const modal = document.getElementById('eventModal');
                modal.classList.remove('hidden');
                
                // TODO: Load real event data based on eventId
                // For now, using static data
                resetTicketQuantities();
                updatePurchaseSummary();
            }

            function closeEventModal() {
                const modal = document.getElementById('eventModal');
                modal.classList.add('hidden');
                selectedEvent = null;
                resetTicketQuantities();
            }

            function setupTicketQuantityControls() {
                // Add event listeners for + and - buttons
                document.querySelectorAll('.ticket-option').forEach(option => {
                    const minusBtn = option.querySelector('button:first-of-type');
                    const plusBtn = option.querySelector('button:last-of-type');
                    const quantitySpan = option.querySelector('span:nth-of-type(2)');
                    const ticketType = option.dataset.ticketType;
                    
                    minusBtn.addEventListener('click', () => {
                        if (ticketQuantities[ticketType] > 0) {
                            ticketQuantities[ticketType]--;
                            quantitySpan.textContent = ticketQuantities[ticketType];
                            updatePurchaseSummary();
                        }
                    });
                    
                    plusBtn.addEventListener('click', () => {
                        ticketQuantities[ticketType]++;
                        quantitySpan.textContent = ticketQuantities[ticketType];
                        updatePurchaseSummary();
                    });
                });
                
                // Purchase button
                document.getElementById('purchaseButton').addEventListener('click', handleTicketPurchase);
            }

            function resetTicketQuantities() {
                ticketQuantities = { regular: 0, vip: 0, vvip: 0 };
                document.querySelectorAll('.ticket-option span:nth-of-type(2)').forEach(span => {
                    span.textContent = '0';
                });
            }

            function updatePurchaseSummary() {
                const prices = { regular: 1000, vip: 2500, vvip: 5000 };
                const ethRate = 133333; // 1 ETH = 133,333 KES (example rate)
                
                let total = 0;
                for (const [type, quantity] of Object.entries(ticketQuantities)) {
                    total += quantity * prices[type];
                }
                
                const totalEth = (total / ethRate).toFixed(6);
                
                // Update UI
                document.querySelector('.border-t .flex:nth-child(1) span:last-child').textContent = `KES ${total.toLocaleString()}`;
                document.querySelector('.border-t .flex:last-child div:first-child').textContent = `KES ${total.toLocaleString()}`;
                document.querySelector('.border-t .flex:last-child div:last-child').textContent = `≈ ${totalEth} ETH`;
                
                // Enable/disable purchase button
                const purchaseBtn = document.getElementById('purchaseButton');
                const hasTickets = Object.values(ticketQuantities).some(qty => qty > 0);
                purchaseBtn.disabled = !hasTickets || !isWalletConnected;
            }

            function handleTicketPurchase() {
                if (!isWalletConnected) {
                    showToast('Please connect your wallet first', 'error');
                    return;
                }
                
                // Show transaction modal
                showTransactionModal('loading');
                
                // TODO: Implement smart contract interaction for ticket purchase
                // This would call the purchaseTicket function on the smart contract
                
                // Simulate blockchain transaction
                setTimeout(() => {
                    // Simulate success or failure
                    const success = Math.random() > 0.2; // 80% success rate for demo
                    
                    if (success) {
                        showTransactionModal('success');
                        closeEventModal();
                        // TODO: Refresh user tickets
                    } else {
                        showTransactionModal('error');
                    }
                }, 3000);
            }

            function showTransactionModal(status) {
                const modal = document.getElementById('transactionModal');
                const states = ['loading', 'success', 'error'];
                
                // Hide all states
                states.forEach(state => {
                    document.getElementById(`transaction${state.charAt(0).toUpperCase() + state.slice(1)}`).classList.add('hidden');
                });
                
                // Show selected state
                document.getElementById(`transaction${status.charAt(0).toUpperCase() + status.slice(1)}`).classList.remove('hidden');
                modal.classList.remove('hidden');
                
                // Auto-hide success/error after delay
                if (status !== 'loading') {
                    setTimeout(() => {
                        modal.classList.add('hidden');
                    }, 3000);
                }
            }

            function showToast(message, type = 'info') {
                const container = document.getElementById('toastContainer');
                const toast = document.createElement('div');
                
                const bgColor = {
                    success: 'bg-secondary',
                    error: 'bg-red-500',
                    info: 'bg-blue-500',
                    warning: 'bg-accent'
                }[type] || 'bg-gray-500';
                
                toast.className = `${bgColor} text-white px-4 py-3 rounded-lg shadow-lg transform transition-transform duration-300 translate-x-full`;
                toast.innerHTML = `
                    <div class="flex items-center">
                        <span>${message}</span>
                        <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-white hover:text-gray-200">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                
                container.appendChild(toast);
                
                // Animate in
                setTimeout(() => {
                    toast.classList.remove('translate-x-full');
                }, 100);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    toast.classList.add('translate-x-full');
                    setTimeout(() => toast.remove(), 300);
                }, 5000);
            }

            // Initialize when DOM is loaded
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                init();
            }
        })();
    </script>
</body>
</html>